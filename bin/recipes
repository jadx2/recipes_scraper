#!/usr/bin/env ruby

require_relative "../lib/scraper_logic"
require_relative "../lib/menu"
require_relative "../lib/recipes.rb"
require_relative "../lib/styles"

def clear
  system "clear" or system "cls"
end

clear

puts "#{COLOR_1}WELCOME TO ALLRECIPES SCRAPER#{COLOR_END}"
puts "#{COLOR_1}===========================#{COLOR_END}"
puts "\n"

def menu_options
  menu = Menu.new
  valid = false
  category = ""
  until valid
    puts "Choose category number:"
    puts "\n"
    puts menu.print_menu
    selection = gets.chomp.to_i
    puts "\n"
    if menu.validator(selection)
      category = menu.links[selection - 1]
      valid = true
    else
      puts "Category not found!"
    end
  end
  category
end

def find_recipes
  recipes = Recipes.new(menu_options)
  recipes.print_recipe
  puts "#{COLOR_DANGER_BG}Press 'Q' to quit or any key to go to the menu:#{COLOR_END}"

  if gets.chomp.upcase == "Q"
    clear && exit
  else
    clear
    find_recipes
  end
end

find_recipes
