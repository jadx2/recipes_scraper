#!/usr/bin/env ruby

require_relative '../lib/scraper_logic'
require_relative '../lib/menu'
require_relative '../lib/styles'

def clear
  system 'clear' or system 'cls'
end

clear

puts "#{COLOR_1}WELCOME TO ALLSPICE SCRAPER#{COLOR_END}"
puts "#{COLOR_1}===========================#{COLOR_END}"
puts "\n"

def menu_options
  links = ['78/breakfast-and-brunch/', '17561/lunch/', '17562/dinner/', '76/appetizers-and-snacks/', '156/bread/', '79/desserts/', '77/drinks/', '96/salad/', '81/side-dish/', '94/soups-stews-and-chili/']
  menu = Menu.new
  valid = false
  category = ''
  until valid
    puts 'Choose category number:'
    puts "\n"
    puts menu.print_menu
    selection = gets.chomp.to_i
    puts "\n"
    case selection
    when 1
      category = links[0] 
      valid = true
    when 2
      category = links[1]
      valid = true
    when 3
      category = links[2]
      valid = true
    when 4
      category = links[3]
      valid = true
    when 5
      category = links[4]
      valid = true
    when 6
      category = links[5]
      valid = true
    when 7
      category = links[6]
      valid = true
    when 8
      category = links[7]
      valid = true
    when 9
      category = links[8]
      valid = true
    when 10
      category = links[9]
      valid = true
    else
      puts "Category not found!"
    end
  end
  recipes = Recipes.new(category)
  recipes.print_recipe
  puts "#{COLOR_DANGER_BG}Press 'Q' to quit or any key to go to the menu:#{COLOR_END}"

  if gets.chomp.upcase == "Q"
    clear && exit
  else
    clear
    menu_options
  end
end

menu_options
